---
apiVersion: v1
kind: ConfigMap
metadata:
  labels:
    {{- include "sftp-server.labels" . | nindent 4 }}
    {{- if .Values.additionalLabels }}
{{ toYaml .Values.additionalLabels | indent 4 }}
    {{- end }}
  name: {{ template "sftp-server.fullname" . }}-users
data:
  users.conf: |
      {{- if eq .Values.sftpConfig.encrypted true }}
      {{ .Values.sftpConfig.username }}:{{ .Values.sftpConfig.password }}:e:{{ .Values.sftpConfig.uid}}:{{ .Values.sftpConfig.gid }}
      {{- else }}
      {{ .Values.sftpConfig.username }}:{{ .Values.sftpConfig.password }}:{{ .Values.sftpConfig.uid}}:{{ .Values.sftpConfig.gid }}
      {{- end }}
